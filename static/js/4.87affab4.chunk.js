(this.webpackJsonpalbum=this.webpackJsonpalbum||[]).push([[4],{27:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return f}));var a=n(20),r=n.n(a),c=n(21),o=n(2),i=n(0),s=n(3),u=n(16),b=n(18),h=function(){function t(e){Object(u.a)(this,t),this.token="".concat(e.token_type," ").concat(e.access_token)}return Object(b.a)(t,[{key:"getListAlbums",value:function(){var t=Object(c.a)(r.a.mark((function t(){var e,n,a,c,o,i=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:10,n=i.length>1&&void 0!==i[1]?i[1]:null,a="https://photoslibrary.googleapis.com/v1/albums?&pageSize=".concat(e),n&&(a+="&pageToken=".concat(n)),t.next=6,fetch(a,{method:"GET",headers:{Authorization:this.token}});case 6:if(200===(c=t.sent).status){t.next=9;break}throw new Error("Fail to load list albums");case 9:return t.next=11,c.json();case 11:return o=t.sent,t.abrupt("return",o);case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getPhotoInAlbum",value:function(){var t=Object(c.a)(r.a.mark((function t(e){var n,a,c,o,i,s,u=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:10,a=u.length>2&&void 0!==u[2]?u[2]:null,c="https://photoslibrary.googleapis.com/v1/mediaItems:search",o={albumId:e,pageSize:n,pageToken:a},t.next=6,fetch(c,{method:"POST",headers:{Authorization:this.token},body:JSON.stringify(o)});case 6:if(200===(i=t.sent).status){t.next=9;break}throw new Error("Fail to load list photo in the album");case 9:return t.next=11,i.json();case 11:return s=t.sent,t.abrupt("return",s);case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}();function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=Object(i.useState)([]),n=Object(o.a)(e,2),a=n[0],u=n[1],b=Object(i.useState)(),l=Object(o.a)(b,2),f=l[0],d=l[1],p=Object(s.c)(),j=function(){var e=Object(c.a)(r.a.mark((function e(){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=7;break}return n=new h(p.tokenObj),e.next=4,n.getListAlbums(t,f);case 4:a=e.sent,d(a.nextPageToken),u(a.albums);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){j()}),[p]),{albums:a,fetchNext:j}}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=Object(i.useState)([]),a=Object(o.a)(n,2),u=a[0],b=a[1],l=Object(i.useState)(),f=Object(o.a)(l,2),d=f[0],p=f[1],j=Object(s.c)(),m=function(){var n=Object(c.a)(r.a.mark((function n(){var a,c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!j){n.next=7;break}return a=new h(j.tokenObj),n.next=4,a.getPhotoInAlbum(t,e,d);case 4:c=n.sent,p(c.nextPageToken),b(c.mediaItems.filter((function(t){return t.mimeType.startsWith("image")})));case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){m()}),[j]),{photos:u,fetchNext:m}}},42:function(t,e,n){},46:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return f}));var a=n(28),r=n(2),c=n(0),o=n(30),i=n(37),s=n(27),u=n(3),b=(n(42),n(1)),h=function(t){return{x:0,y:-4*t,scale:1,rot:20*Math.random()-10,delay:100*t}},l=function(t,e){return"perspective(1500px) rotateX(30deg) rotateY(".concat(t/10,"deg) rotateZ(").concat(t,"deg) scale(").concat(e,")")};function f(){var t=Object(u.d)(),e=t.page,n=t.setPage,f=Object(s.b)(e.params.albumId,10),d=f.photos,p=f.fetchNext,j=Object(c.useState)((function(){return new Set})),m=Object(r.a)(j,1)[0],O=Object(o.useSprings)(d.length,(function(t){return Object(a.a)(Object(a.a)({},h(t)),{},{from:{x:0,rot:0,scale:1.5,y:-1e3}})})),v=Object(r.a)(O,2),g=v[0],x=v[1],k=Object(i.a)((function(t){var e=Object(r.a)(t.args,1)[0],n=t.down,a=Object(r.a)(t.delta,1)[0],c=(t.distance,Object(r.a)(t.direction,1)[0]),o=t.velocity,i=c<0?-1:1;!n&&o>.2&&m.add(e),x((function(t){if(e===t){var r=m.has(e);return{x:r?(200+window.innerWidth)*i:n?a:0,rot:a/100+(r?10*i*o:0),scale:n?1.1:1,delay:void 0,config:{friction:50,tension:n?800:r?200:500}}}})),n||m.size!==d.length||p().then((function(){m.clear()||x((function(t){return h(t)}))}))})),w=Math.min(window.screen.availWidth,600),y=g.map((function(t,e){var n=t.x,r=t.y,c=t.rot,i=t.scale,s=d[e].mediaMetadata,u=s.width>s.height,h=window.screen.availWidth<660,f={transform:Object(o.interpolate)([c,i],l),backgroundImage:"url(".concat(d[e].baseUrl,"=w").concat(w,")"),backgroundSize:"100%"};return Object(b.jsx)(o.animated.div,{style:{transform:Object(o.interpolate)([n,r],(function(t,e){return"translate3d(".concat(t,"px,").concat(e,"px,0)")}))},children:Object(b.jsx)(o.animated.div,Object(a.a)(Object(a.a)({},k(e)),{},{style:h?f:Object(a.a)(Object(a.a)({},f),{},{width:u?"85vh":"45vh",height:u?"45vh":"85vh",maxWidth:u?"570px":"500px",maxHeight:u?"500px":"570px",backgroundSize:u?"85% auto":"auto 85%"})}))},e)}));return Object(b.jsxs)("div",{className:"Album BackApp",children:[Object(b.jsx)("div",{className:"bg"}),Object(b.jsx)("div",{className:"BackButton",onClick:function(){n("home")},children:"Back"}),Object(b.jsx)("div",{className:"StackPhoto",children:y})]})}}}]);
//# sourceMappingURL=4.87affab4.chunk.js.map