(this.webpackJsonpalbum=this.webpackJsonpalbum||[]).push([[4],{24:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var a=n(23),c=n(2),r=n(0),i=n(35),o=n(42),s=(n(28),n(1)),u=function(t){return{x:0,y:-4*t,scale:1,rot:20*Math.random()-10,delay:100*t}},l=function(t,e){return"perspective(1500px) rotateX(30deg) rotateY(".concat(t/10,"deg) rotateZ(").concat(t,"deg) scale(").concat(e,")")};function b(t){var e=t.papers,n=t.onNext,b=t.onClickItem,d=t.onPushoutItem,h=Object(r.useState)((function(){return new Set})),f=Object(c.a)(h,1)[0],p=Object(i.useSprings)(e.length,(function(t){return Object(a.a)(Object(a.a)({},u(t)),{},{from:{x:0,rot:0,scale:1.5,y:-1e3}})})),m=Object(c.a)(p,2),j=m[0],v=m[1],g=Object(o.a)((function(t){var a=Object(c.a)(t.args,1)[0],r=t.down,i=Object(c.a)(t.delta,1)[0],o=(t.distance,Object(c.a)(t.direction,1)[0]),s=t.velocity,l=s>.2,h=o<0?-1:1;!r&&l?(f.add(a),d&&d(e[a])):r||l||b&&b(e[a]),v((function(t){if(a===t){var e=f.has(a);return{x:e?(200+window.innerWidth)*h:r?i:0,rot:i/100+(e?10*h*s:0),scale:r?1.1:1,delay:void 0,config:{friction:50,tension:r?800:e?200:500}}}})),r||f.size!==e.length||(n?n().then((function(){f.clear()||v((function(t){return u(t)}))})):f.clear()||v((function(t){return u(t)})))})),O=Math.min(window.screen.availWidth,600),x=j.map((function(t,n){var c=t.x,r=t.y,o=t.rot,u=t.scale,b=e[n],d=b.width>b.height,h=window.screen.availWidth<660,f={transform:Object(i.interpolate)([o,u],l),backgroundImage:"url(".concat(e[n].url,"=w").concat(O,")"),backgroundSize:"100%"};return Object(s.jsx)(i.animated.div,{style:{transform:Object(i.interpolate)([c,r],(function(t,e){return"translate3d(".concat(t,"px,").concat(e,"px,0)")}))},children:Object(s.jsx)(i.animated.div,Object(a.a)(Object(a.a)({},g(n)),{},{style:h?f:Object(a.a)(Object(a.a)({},f),{},{width:d?"85vh":"45vh",height:d?"45vh":"85vh",maxWidth:d?"570px":"500px",maxHeight:d?"500px":"570px",backgroundSize:d?"85% auto":"auto 85%"})}))},n)}));return Object(s.jsx)("div",{className:"StackPaper",children:x})}},28:function(t,e,n){},29:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n(23),c=(n(30),n(1));function r(t){var e=t.children;return Object(c.jsx)("button",Object(a.a)(Object(a.a)({},t),{},{className:"Button ".concat(t.className),children:e}))}},30:function(t,e,n){},33:function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return h})),n.d(e,"a",(function(){return f}));var a=n(4),c=n.n(a),r=n(8),i=n(2),o=n(0),s=n(3),u=n(19),l=n(21),b=function(){function t(e){Object(u.a)(this,t),this.token=e}return Object(l.a)(t,[{key:"getListAlbums",value:function(){var t=Object(r.a)(c.a.mark((function t(){var e,n,a,r,i,o=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:10,n=o.length>1&&void 0!==o[1]?o[1]:null,a="https://photoslibrary.googleapis.com/v1/albums?&pageSize=".concat(e),n&&(a+="&pageToken=".concat(n)),t.next=6,fetch(a,{method:"GET",headers:{Authorization:this.token}});case 6:if(200===(r=t.sent).status){t.next=9;break}throw new Error("".concat(r.status,": Fail to load list albums"));case 9:return t.next=11,r.json();case 11:return i=t.sent,t.abrupt("return",i);case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getPhotoInAlbum",value:function(){var t=Object(r.a)(c.a.mark((function t(e){var n,a,r,i,o,s,u=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:10,a=u.length>2&&void 0!==u[2]?u[2]:null,r="https://photoslibrary.googleapis.com/v1/mediaItems:search",i={albumId:e,pageSize:n,pageToken:a},t.next=6,fetch(r,{method:"POST",headers:{Authorization:this.token},body:JSON.stringify(i)});case 6:if(200===(o=t.sent).status){t.next=9;break}throw new Error("".concat(o.status,": Fail to load list photo in the album"));case 9:return t.next=11,o.json();case 11:return s=t.sent,t.abrupt("return",s);case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}();function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=Object(o.useState)([]),n=Object(i.a)(e,2),a=n[0],u=n[1],l=Object(o.useState)(),d=Object(i.a)(l,2),h=d[0],f=d[1],p=Object(s.d)(),m=p.auth,j=p.authReload,v=Object(o.useCallback)(Object(r.a)(c.a.mark((function e(){var n,a,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=18;break}return r=new b("".concat(m.token_type," ").concat(m.access_token)),e.prev=2,e.next=5,r.getListAlbums(t,h);case 5:i=e.sent,e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(2),!e.t0.message.startsWith("401")){e.next=16;break}return e.next=13,j();case 13:return e.next=15,r.getListAlbums(t,h);case 15:i=e.sent;case 16:f(null===(n=i)||void 0===n?void 0:n.nextPageToken),u(null===(a=i)||void 0===a?void 0:a.albums);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),[m,u,h,j,t]);return Object(o.useEffect)((function(){v()}),[m]),{albums:a,fetchNext:v}}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=Object(o.useState)([]),a=Object(i.a)(n,2),u=a[0],l=a[1],d=Object(o.useState)(),h=Object(i.a)(d,2),f=h[0],p=h[1],m=Object(s.d)(),j=m.auth,v=m.authReload,g=Object(o.useCallback)(Object(r.a)(c.a.mark((function n(){var a,r,i,o;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!j){n.next=18;break}return i=new b("".concat(j.token_type," ").concat(j.access_token)),n.prev=2,n.next=5,i.getPhotoInAlbum(t,e,f);case 5:o=n.sent,n.next=16;break;case 8:if(n.prev=8,n.t0=n.catch(2),!n.t0.message.startsWith("401")){n.next=16;break}return n.next=13,v();case 13:return n.next=15,i.getPhotoInAlbum(t,e,f);case 15:o=n.sent;case 16:p(null===(a=o)||void 0===a?void 0:a.nextPageToken),l(null===(r=o)||void 0===r?void 0:r.mediaItems.filter((function(t){return t.mimeType.startsWith("image/")})));case 18:case"end":return n.stop()}}),n,null,[[2,8]])}))),[j,t,v,f,e]);return Object(o.useEffect)((function(){g()}),[j]),{photos:u,fetchNext:g}}function f(){return{isMobile:window.screen.availWidth<660}}},46:function(t,e,n){},50:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return l}));n(0);var a=n(33),c=n(3),r=n(24),i=n(29),o=n.p+"static/media/bg-2-desktop.cef3ab49.jpg",s=n.p+"static/media/bg-2-mobile.f3cb29fc.jpg",u=(n(46),n(1));function l(){var t=Object(c.e)(),e=t.page,n=t.setPage,l=Object(a.c)(e.params.albumId,10),b=l.photos,d=l.fetchNext,h=Object(a.a)().isMobile;return Object(u.jsxs)("div",{className:"Album BackApp",children:[Object(u.jsx)("div",{className:"bg",style:{backgroundImage:"url(".concat(h?s:o,")")}}),Object(u.jsx)(i.a,{className:"BackButton",onClick:function(){n("home")},children:"Back"}),Object(u.jsx)(r.a,{onNext:d,papers:b.filter((function(t){return t.mimeType.startsWith("image/")})).map((function(t){return{id:t.id,url:t.baseUrl,width:t.mediaMetadata.width,height:t.mediaMetadata.height,title:t.filename}}))})]})}}}]);
//# sourceMappingURL=4.dfa4e018.chunk.js.map