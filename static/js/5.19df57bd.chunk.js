(this.webpackJsonpalbum=this.webpackJsonpalbum||[]).push([[5],{24:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var a=n(23),c=n(2),r=n(0),o=n(35),i=n(42),s=(n(28),n(1)),u=function(t){return{x:0,y:-4*t,scale:1,rot:20*Math.random()-10,delay:100*t}},l=function(t,e){return"perspective(1500px) rotateX(30deg) rotateY(".concat(t/10,"deg) rotateZ(").concat(t,"deg) scale(").concat(e,")")};function b(t){var e=t.papers,n=t.onNext,b=t.onClickItem,d=t.onPushoutItem,h=Object(r.useState)((function(){return new Set})),f=Object(c.a)(h,1)[0],j=Object(o.useSprings)(e.length,(function(t){return Object(a.a)(Object(a.a)({},u(t)),{},{from:{x:0,rot:0,scale:1.5,y:-1e3}})})),p=Object(c.a)(j,2),v=p[0],m=p[1],O=Object(i.a)((function(t){var a=Object(c.a)(t.args,1)[0],r=t.down,o=Object(c.a)(t.delta,1)[0],i=(t.distance,Object(c.a)(t.direction,1)[0]),s=t.velocity,l=s>.2,h=i<0?-1:1;!r&&l?(f.add(a),d&&d(e[a])):r||l||b&&b(e[a]),m((function(t){if(a===t){var e=f.has(a);return{x:e?(200+window.innerWidth)*h:r?o:0,rot:o/100+(e?10*h*s:0),scale:r?1.1:1,delay:void 0,config:{friction:50,tension:r?800:e?200:500}}}})),r||f.size!==e.length||(n?n().then((function(){f.clear()||m((function(t){return u(t)}))})):f.clear()||m((function(t){return u(t)})))})),g=Math.min(window.screen.availWidth,600),x=v.map((function(t,n){var c=t.x,r=t.y,i=t.rot,u=t.scale,b=e[n],d=b.width>b.height,h=window.screen.availWidth<660,f={transform:Object(o.interpolate)([i,u],l),backgroundImage:"url(".concat(e[n].url,"=w").concat(g,")"),backgroundSize:"100%"};return Object(s.jsx)(o.animated.div,{style:{transform:Object(o.interpolate)([c,r],(function(t,e){return"translate3d(".concat(t,"px,").concat(e,"px,0)")}))},children:Object(s.jsx)(o.animated.div,Object(a.a)(Object(a.a)({},O(n)),{},{style:h?f:Object(a.a)(Object(a.a)({},f),{},{width:d?"85vh":"45vh",height:d?"45vh":"85vh",maxWidth:d?"570px":"500px",maxHeight:d?"500px":"570px",backgroundSize:d?"85% auto":"auto 85%"})}))},n)}));return Object(s.jsx)("div",{className:"StackPaper",children:x})}},28:function(t,e,n){},29:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n(23),c=(n(30),n(1));function r(t){var e=t.children;return Object(c.jsx)("button",Object(a.a)(Object(a.a)({},t),{},{className:"Button ".concat(t.className),children:e}))}},30:function(t,e,n){},33:function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return h})),n.d(e,"a",(function(){return f}));var a=n(4),c=n.n(a),r=n(8),o=n(2),i=n(0),s=n(3),u=n(19),l=n(21),b=function(){function t(e){Object(u.a)(this,t),this.token=e}return Object(l.a)(t,[{key:"getListAlbums",value:function(){var t=Object(r.a)(c.a.mark((function t(){var e,n,a,r,o,i=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:10,n=i.length>1&&void 0!==i[1]?i[1]:null,a="https://photoslibrary.googleapis.com/v1/albums?&pageSize=".concat(e),n&&(a+="&pageToken=".concat(n)),t.next=6,fetch(a,{method:"GET",headers:{Authorization:this.token}});case 6:if(200===(r=t.sent).status){t.next=9;break}throw new Error("".concat(r.status,": Fail to load list albums"));case 9:return t.next=11,r.json();case 11:return o=t.sent,t.abrupt("return",o);case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getPhotoInAlbum",value:function(){var t=Object(r.a)(c.a.mark((function t(e){var n,a,r,o,i,s,u=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:10,a=u.length>2&&void 0!==u[2]?u[2]:null,r="https://photoslibrary.googleapis.com/v1/mediaItems:search",o={albumId:e,pageSize:n,pageToken:a},t.next=6,fetch(r,{method:"POST",headers:{Authorization:this.token},body:JSON.stringify(o)});case 6:if(200===(i=t.sent).status){t.next=9;break}throw new Error("".concat(i.status,": Fail to load list photo in the album"));case 9:return t.next=11,i.json();case 11:return s=t.sent,t.abrupt("return",s);case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}();function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=Object(i.useState)([]),n=Object(o.a)(e,2),a=n[0],u=n[1],l=Object(i.useState)(),d=Object(o.a)(l,2),h=d[0],f=d[1],j=Object(s.d)(),p=j.auth,v=j.authReload,m=Object(i.useCallback)(Object(r.a)(c.a.mark((function e(){var n,a,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=18;break}return r=new b("".concat(p.token_type," ").concat(p.access_token)),e.prev=2,e.next=5,r.getListAlbums(t,h);case 5:o=e.sent,e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(2),!e.t0.message.startsWith("401")){e.next=16;break}return e.next=13,v();case 13:return e.next=15,r.getListAlbums(t,h);case 15:o=e.sent;case 16:f(null===(n=o)||void 0===n?void 0:n.nextPageToken),u(null===(a=o)||void 0===a?void 0:a.albums);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),[p,u,h,v,t]);return Object(i.useEffect)((function(){m()}),[p]),{albums:a,fetchNext:m}}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=Object(i.useState)([]),a=Object(o.a)(n,2),u=a[0],l=a[1],d=Object(i.useState)(),h=Object(o.a)(d,2),f=h[0],j=h[1],p=Object(s.d)(),v=p.auth,m=p.authReload,O=Object(i.useCallback)(Object(r.a)(c.a.mark((function n(){var a,r,o,i;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!v){n.next=18;break}return o=new b("".concat(v.token_type," ").concat(v.access_token)),n.prev=2,n.next=5,o.getPhotoInAlbum(t,e,f);case 5:i=n.sent,n.next=16;break;case 8:if(n.prev=8,n.t0=n.catch(2),!n.t0.message.startsWith("401")){n.next=16;break}return n.next=13,m();case 13:return n.next=15,o.getPhotoInAlbum(t,e,f);case 15:i=n.sent;case 16:j(null===(a=i)||void 0===a?void 0:a.nextPageToken),l(null===(r=i)||void 0===r?void 0:r.mediaItems);case 18:case"end":return n.stop()}}),n,null,[[2,8]])}))),[v,t,m,f,e]);return Object(i.useEffect)((function(){O()}),[v]),{photos:u,fetchNext:O}}function f(){return{isMobile:window.screen.availWidth<660}}},45:function(t,e,n){},49:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return d}));var a=n(2),c=n(0),r=n(33),o=n(3),i=n(24),s=n(29),u=n.p+"static/media/bg-1-desktop.c8449dda.jpg",l=n.p+"static/media/bg-1-mobile.7aedae24.jpg",b=(n(45),n(1));function d(){var t=Object(r.b)(49).albums,e=Object(o.e)().setPage,n=Object(o.d)().signOut,d=Object(c.useState)(0),h=Object(a.a)(d,2),f=h[0],j=h[1];Object(c.useEffect)((function(){t&&t.length>0&&j(t.length-1)}),[t]);var p=Object(c.useCallback)((function(t){e({name:"album",params:{albumId:t.id}})}),[e]),v=Object(c.useCallback)((function(){n()}),[n]),m=Object(c.useCallback)((function(){j(f-1)}),[f]),O=Object(r.a)().isMobile;return Object(b.jsxs)("div",{className:"Home BackApp",children:[Object(b.jsx)("div",{className:"bg",style:{backgroundImage:"url(".concat(O?l:u,")")}}),Object(b.jsx)(s.a,{className:"LogoutButton",onClick:v,children:"Logout"}),Object(b.jsx)(i.a,{papers:t.map((function(t){return{id:t.id,url:t.coverPhotoBaseUrl,width:void 0,height:void 0,title:t.title}})),onPushoutItem:m,onClickItem:p})]})}}}]);
//# sourceMappingURL=5.19df57bd.chunk.js.map