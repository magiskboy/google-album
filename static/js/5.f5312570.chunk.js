(this.webpackJsonpalbum=this.webpackJsonpalbum||[]).push([[5],{27:function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return h}));var a=n(20),r=n.n(a),c=n(21),o=n(2),s=n(0),i=n(3),u=n(16),l=n(18),b=function(){function t(e){Object(u.a)(this,t),this.token="".concat(e.token_type," ").concat(e.access_token)}return Object(l.a)(t,[{key:"getListAlbums",value:function(){var t=Object(c.a)(r.a.mark((function t(){var e,n,a,c,o,s=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:10,n=s.length>1&&void 0!==s[1]?s[1]:null,a="https://photoslibrary.googleapis.com/v1/albums?&pageSize=".concat(e),n&&(a+="&pageToken=".concat(n)),t.next=6,fetch(a,{method:"GET",headers:{Authorization:this.token}});case 6:if(200===(c=t.sent).status){t.next=9;break}throw new Error("Fail to load list albums");case 9:return t.next=11,c.json();case 11:return o=t.sent,t.abrupt("return",o);case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getPhotoInAlbum",value:function(){var t=Object(c.a)(r.a.mark((function t(e){var n,a,c,o,s,i,u=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:10,a=u.length>2&&void 0!==u[2]?u[2]:null,c="https://photoslibrary.googleapis.com/v1/mediaItems:search",o={albumId:e,pageSize:n,pageToken:a},t.next=6,fetch(c,{method:"POST",headers:{Authorization:this.token},body:JSON.stringify(o)});case 6:if(200===(s=t.sent).status){t.next=9;break}throw new Error("Fail to load list photo in the album");case 9:return t.next=11,s.json();case 11:return i=t.sent,t.abrupt("return",i);case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),f=["AFQKIAIDtGHas7h0c5nnnlDez-2BSpsbZldeRUAaI0TEU3DY2ktGwZu6oDQff6w9M_CWnhK-823B","AFQKIAIDT9DT3pScu6fNwkuooH8haUjBQdePIoesJqMg3LD4TypzWPRESMtZ5zoA97yzpL0g9Y1g","AFQKIAIdl9voQbVKtwOROkREXucrQQ0GlXaCy8ZUSemJZsPCeXHG3DRnuwC99cMu0ARP-WzCL_zT"];function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=Object(s.useState)([]),n=Object(o.a)(e,2),a=n[0],u=n[1],l=Object(s.useState)(),d=Object(o.a)(l,2),h=d[0],p=d[1],j=Object(i.c)(),O=function(){var e=Object(c.a)(r.a.mark((function e(){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=7;break}return n=new b(j.tokenObj),e.next=4,n.getListAlbums(t,h);case 4:a=e.sent,p(a.nextPageToken),u(a.albums.filter((function(t){return f.includes(t.id)})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){O()}),[j]),{albums:a,fetchNext:O}}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=Object(s.useState)([]),a=Object(o.a)(n,2),u=a[0],l=a[1],f=Object(s.useState)(),d=Object(o.a)(f,2),h=d[0],p=d[1],j=Object(i.c)(),O=function(){var n=Object(c.a)(r.a.mark((function n(){var a,c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!j){n.next=7;break}return a=new b(j.tokenObj),n.next=4,a.getPhotoInAlbum(t,e,h);case 4:c=n.sent,p(c.nextPageToken),l(c.mediaItems.filter((function(t){return t.mimeType.startsWith("image")})));case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(s.useEffect)((function(){O()}),[j]),{photos:u,fetchNext:O}}},41:function(t,e,n){},44:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return d}));var a=n(28),r=n(2),c=n(0),o=n(37),s=n(30),i=n(27),u=n(3),l=(n(41),n(1)),b=function(t){return{x:0,y:-4*t,scale:1,rot:20*Math.random()-10,delay:100*t}},f=function(t,e){return"perspective(1500px) rotateX(30deg) rotateY(".concat(t/10,"deg) rotateZ(").concat(t,"deg) scale(").concat(e,")")};function d(){var t=Object(i.a)(49).albums,e=Object(u.d)().setPage,n=Object(c.useState)((function(){return new Set})),d=Object(r.a)(n,1)[0],h=Object(c.useState)(0),p=Object(r.a)(h,2),j=p[0],O=p[1],m=Object(s.useSprings)(t.length,(function(t){return Object(a.a)(Object(a.a)({},b(t)),{},{from:{x:0,rot:0,scale:1.5,y:-1e3}})})),v=Object(r.a)(m,2),g=v[0],x=v[1];Object(c.useEffect)((function(){t&&t.length>0&&O(t.length-1)}),[t]);var k=Object(o.a)((function(n){var a=Object(r.a)(n.args,1)[0],c=n.down,o=Object(r.a)(n.delta,1)[0],s=(n.distance,Object(r.a)(n.direction,1)[0]),i=n.velocity,u=i>.2,l=s<0?-1:1;!c&&u?(O(j-1),d.add(a)):c||u||e({name:"album",params:{albumId:t[a].id}}),x((function(t){if(a===t){var e=d.has(a);return{x:e?(200+window.innerWidth)*l:c?o:0,rot:o/100+(e?10*l*i:0),scale:c?1.1:1,delay:void 0,config:{friction:50,tension:c?800:e?200:500}}}})),c||d.size!==t.length||(O(t.length-1),d.clear()||x((function(t){return b(t)})))})),w=g.map((function(e,n){var r=e.x,c=e.y,o=e.rot,i=e.scale,u=Math.min(window.screen.availWidth,660),b={transform:Object(s.interpolate)([o,i],f),backgroundImage:"url(".concat(t[n].coverPhotoBaseUrl,"=w").concat(u,")"),backgroundSize:"100%"};return Object(l.jsx)(s.animated.div,{style:{transform:Object(s.interpolate)([r,c],(function(t,e){return"translate3d(".concat(t,"px,").concat(e,"px,0)")}))},children:Object(l.jsx)(s.animated.div,Object(a.a)(Object(a.a)({},k(n)),{},{style:b}))},n)}));return Object(l.jsxs)("div",{className:"Home BackApp",children:[Object(l.jsx)("div",{className:"bg"}),Object(l.jsx)("div",{className:"AppHeader",children:t&&t[j]&&t[j].title}),Object(l.jsx)("div",{className:"ListAlbum",children:w})]})}}}]);
//# sourceMappingURL=5.f5312570.chunk.js.map